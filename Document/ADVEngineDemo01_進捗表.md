# ADVEngineDemo 進捗表

**プロジェクト名**: ADVEngineDemo  
**エンジン**: Godot Engine 4.5.1  
**言語**: GDScript  
**更新日**: 2026年1月19日

---

## プロジェクト概要

### 目標
Godot Engine 4.xで作成する、高機能かつ拡張性の高いアドベンチャーゲームエンジン。

### 主要機能（目標）

#### ✅ 実装済み
- ✅ テキストベースシナリオ読み込み（`.txt`形式）
- ✅ メッセージウインドウ表示（複数ウインドウ対応）
- ✅ 背景画像切り替え
- ✅ キャラクター立ち絵表示・非表示
- ✅ BGM/SE再生システム
- ✅ フェード/クロスフェード
- ✅ タイトル画面
- ✅ コマンドパターンによる拡張システム
- ✅ キャラクターエディター（プラグイン）
- ✅ 待機コマンド（@wait）
- ✅ ウインドウ切り替えコマンド（@window）

#### 🚧 未実装（計画中）
- 🚧 パララクス表示（立ち絵・背景・アイテム）
- 🚧 ポストエフェクト（Unityライク）
- 🚧 ピクチャーインピクチャー演出
- 🚧 リッチテキスト演出（太字、色変更など）
- 🚧 設定画面（音量、テキスト速度、キーコンフィグ）
- 🚧 セーブ/ロードシステム サムネイル付きセーブデータ作成。
- 🚧 TIPS/用語集システム
- 🚧 キーボード/コントローラー対応
- 🚧 シナリオのジャンプ、タグのジャンプ機能 @jump 
- 🚧 選択肢システム
- 🚧 変数・フラグ管理
- 🚧 条件分岐
- 🚧 背景やスチルの切り替え演出
- 🚧 コレクション機能（CG解放など）



## 将来の拡張予定

### 優先度：高

#### セーブ/ロードシステム
- セーブデータ管理
- セーブスロット選択
- オートセーブ
- クイックセーブ/ロード

#### 選択肢システム
```
@choice
選択肢A|選択肢B|選択肢C
@choice_result {result_variable}
```

#### 変数・フラグ管理
```
@set flag_name=value
@if flag_name == value
    # 条件分岐
@endif
```

#### 設定画面
- BGM/SE音量調整
- テキスト速度調整
- ウィンドウモード切り替え
- キーコンフィグ

### 優先度：中

#### リッチテキスト演出
```
主人公:これは[b]太文字[/b]で、これは[color=red]赤色[/color]です。
```

#### アニメーション
```
@animate chara alice shake duration:1.0
@animate bg fade_out duration:2.0
```

#### TIPS/用語集
```
主人公:これは[tips=用語1]特殊な用語[/tips]です。
```

#### CG解放
- CG管理システム
- ギャラリー画面
- 解放条件設定

### 優先度：低

#### パララクス表示
- 立ち絵・背景・アイテムのレイヤー分け
- 奥行き感の演出

#### ポストエフェクト
- ブラー、セピア、モノクロなどのフィルター
- カメラシェイク

#### ピクチャーインピクチャー
- 画面分割演出
- 回想シーン表示

#### ボイス再生
- キャラクターボイス再生
- リップシンク

---

## 技術メモ

### Godot 4.x 構文の使用
- `@export var` (Godot 3.x の `export var` は使用禁止)
- `await` (Godot 3.x の `yield` は使用禁止)
- `@onready var` (Godot 3.x の `onready var` は使用禁止)
- シグナル接続: `signal_name.connect(method_name)`

### 静的型付け
全ての変数・引数・戻り値に型ヒントを付与:
```gdscript
var health: int = 100
func damage(amount: int) -> void:
    health -= amount
```

### パフォーマンス
- コマンドクラスは軽量（RefCounted継承）
- 辞書検索は O(1)
- テクスチャキャッシュ機能

### デバッグ
- `print()` でコマンド実行ログを出力
- CommandRegistry初期化時にコマンド一覧を表示
- エラーハンドリング: `push_error()`, `push_warning()
